# k8s Multi-Container System 아키텍처 발표 대본

## 1. 시스템 개요 (2분)

안녕하세요. 오늘은 Kubernetes 기반의 다중 사용자 GPU 학습 시스템에 대해 발표하겠습니다.

**문제 상황**
- 단일 GPU 환경에서 여러 사용자가 동시에 딥러닝 학습을 요청
- GPU 리소스 충돌과 비효율적인 자원 사용 문제
- 수동 스케줄링으로 인한 관리 복잡성

**해결 방안**
- Kubernetes와 Argo Workflow를 활용한 자동화된 작업 스케줄링
- Redis 기반 대기열 시스템으로 순차 처리
- 실시간 리소스 모니터링을 통한 효율적 자원 관리

## 2. 시스템 아키텍처 (3분)

*[다이어그램 화면 표시]*

전체 시스템은 크게 4개 레이어로 구성됩니다.

**사용자 레이어**
- 3명의 사용자가 동시에 학습 작업을 제출할 수 있습니다
- REST API를 통해 간단하게 작업 요청

**작업 관리 레이어**
- Queue Manager: 모든 작업 요청을 받아 Redis 대기열에 저장
- Redis: 작업 상태와 대기열 정보를 안정적으로 관리
- FIFO 방식으로 공정한 순서 보장

**리소스 모니터링 레이어**
- Resource Monitor: 실시간으로 GPU, CPU, 메모리 사용률 추적
- 임계값 기반으로 리소스 가용성 판단
- HTTP API로 스케줄러에게 상태 정보 제공

**워크플로 실행 레이어**
- Argo Server: Kubernetes 워크플로 관리와 웹 UI 제공
- Workflow Controller: 실제 Pod 생성과 라이프사이클 관리
- Proto-GCN 학습 작업을 독립적인 Pod에서 실행

## 3. 데이터 흐름 (2분)

시스템의 작업 처리 과정을 5단계로 설명하겠습니다.

**1단계: 작업 제출**
- 사용자가 Queue Manager API로 학습 작업 제출
- 작업 정보에는 사용자 ID, 설정 파일, 작업 디렉토리 포함

**2단계: 대기열 저장**
- Redis에 작업이 FIFO 순서로 저장
- 현재 대기열 상태와 위치 정보 제공

**3단계: 리소스 확인**
- 스케줄러가 10초마다 대기열 확인
- Resource Monitor에서 GPU 가용성 체크
- GPU 메모리 2GB 이상, 사용률 80% 미만일 때 실행 가능

**4단계: 워크플로 생성**
- 리소스가 가용하면 Argo 워크플로 생성
- Kubernetes에서 Proto-GCN Pod 실행

**5단계: 학습 실행**
- Pod에서 실제 딥러닝 모델 학습 수행
- GPU 1개 독점 사용, 완료 후 다음 작업 진행

## 4. 리소스 관리 전략 (2분)

**GPU 관리**
- NVIDIA RTX 3080 1개를 순차적으로 사용
- 동시 실행은 1개 작업만 허용하여 성능 최적화
- GPU 메모리와 사용률 실시간 모니터링

**메모리 및 CPU**
- Pod당 16Gi 메모리 제한으로 안정성 확보
- CPU 사용률 90% 미만 유지
- 시스템 전체 메모리 85% 미만 사용

**스토리지**
- 로컬 데이터를 HostPath로 마운트
- 모든 Pod이 동일한 학습 데이터 접근

**네트워킹**
- Flannel CNI로 Pod 간 통신
- Port Forward로 외부 접근 제공

## 5. 확장성과 장점 (1분)

**현재 시스템**
- 1 GPU 환경에서 순차 처리
- 무제한 작업 대기열 지원
- 사용자별 독립적인 실행 환경

**확장 가능성**
- 다중 GPU 노드 추가 시 병렬 처리 가능
- Kubernetes의 수평 확장성 활용
- 클러스터 규모에 따른 처리량 증가

**주요 장점**
- 자동화된 스케줄링으로 관리 부담 감소
- 공정한 FIFO 방식으로 사용자 만족도 향상
- 실시간 모니터링으로 리소스 효율성 극대화
- 컨테이너 기반으로 환경 일관성 보장

## 6. 마무리 (30초)

이 시스템을 통해 단일 GPU 환경에서도 여러 사용자가 효율적으로 딥러닝 학습을 수행할 수 있습니다. Kubernetes의 강력한 오케스트레이션 기능과 Argo Workflow의 유연성을 결합하여 확장 가능하고 안정적인 ML 플랫폼을 구축했습니다.

질문이 있으시면 언제든지 말씀해 주세요. 감사합니다.

---

**발표 팁:**
- 총 발표 시간: 약 10분
- 다이어그램을 활용하여 시각적 설명
- 실제 데모나 모니터링 화면 보여주기
- 기술적 세부사항보다는 전체 흐름과 장점 강조
